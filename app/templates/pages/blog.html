{% extends "base.html" %}
<!--
=============================================================================
BLOG INDEX TEMPLATE
=============================================================================
Purpose: List all blog posts (learnings).

Shows:
- Post title with link
- Publication date
- Excerpt/preview
- Draft status (admin only)
=============================================================================
-->

{% block title %}Blog — {{ site_name }}{% endblock %}

{% block content %}
<div class="container">
    <header class="page-header">
        <h1>Blog</h1>
        <p class="subtitle">Thoughts, learnings, and discoveries</p>
    </header>

    {% if user %}
    <!-- Admin: Show create button -->
    <div class="mb-8 text-center">
        <a href="/admin/posts/new" class="btn btn-primary">Write New Post</a>
    </div>
    {% endif %}

    {% if posts %}
    <div class="stagger-fade">
        {% for post in posts %}
        <article class="post-card">
            <h3>
                <a href="/blog/{{ post.slug }}">{{ post.title }}</a>
                {% if not post.published %}
                <span class="post-status post-status--draft">Draft</span>
                {% endif %}
            </h3>
            <p class="post-meta">
                {{ post.created_at.strftime('%B %d, %Y') }}
                · {{ post.content | reading_time }} min read
                {% if user %}
                · <a href="/admin/posts/{{ post.id }}/edit">Edit</a>
                {% endif %}
            </p>
            <p class="post-excerpt">{{ post.preview }}</p>
        </article>
        {% endfor %}
    </div>
    {% else %}
    <!-- Empty State -->
    <div class="text-center">
        <p class="text-muted">No posts yet. Check back soon!</p>
        {% if user %}
        <p class="mt-4">
            <a href="/admin/posts/new" class="btn btn-primary">Write First Post</a>
        </p>
        {% endif %}
    </div>
    {% endif %}
</div>
{% endblock %}
